[global]
datadir = /mnt/lustre/io500/data/vmall
resultdir = /mnt/lustre/io500/results/vmall
timestamp-datadir = TRUE
timestamp-resultdir = TRUE
api = POSIX
verbosity = 1
scc = FALSE
dataPacketType = timestamp

# --- OPTIMIZATION: Disable internal cache dropping.
# --- You will handle this manually/via script to support containers.
drop-caches = FALSE
# drop-caches-cmd = sudo -n bash -c "echo 3 > /proc/sys/vm/drop_caches"
io-buffers-on-gpu = FALSE

[debug]
stonewall-time = 300

# =======================================================
# BANDWIDTH PHASES (IOR)
# =======================================================

[ior-easy]
# --- OPTIMIZATION: 8TB total dataset (128GiB * 64 procs)
transferSize = 16m
blockSize = 128GiB
filePerProc = TRUE
uniqueDir = TRUE
run = TRUE

[ior-easy-write]
run = TRUE
[ior-easy-read]
run = TRUE

[ior-hard]
# --- TUNING: Set to 300,000. 
# --- On fast systems (2.5 GB/s+), this ensures >300s runtime.
# --- On slower systems, this is safe but will take longer.
segmentCount = 300000
collective = TRUE
run = TRUE

[ior-hard-write]
run = TRUE
[ior-hard-read]
run = TRUE

# =======================================================
# METADATA PHASES (MDTEST)
# =======================================================

[mdtest-easy]
# --- Total files =  (64 procs * n).
n = 550000
run = TRUE

[mdtest-easy-write]
run = TRUE
[mdtest-easy-stat]
run = TRUE
[mdtest-easy-delete]
run = TRUE

[mdtest-hard]
# --- TUNING: Hard metadata is usually slower
n = 550000
run = TRUE

[mdtest-hard-write]
run = TRUE
[mdtest-hard-stat]
run = TRUE
[mdtest-hard-read]
run = TRUE
[mdtest-hard-delete]
run = TRUE

# =======================================================
# FIND PHASE
# =======================================================

[find]
# Run the find phase (pfind if available, or standard find)
run = TRUE
pfind-queue-length = 10000
pfind-steal-next = FALSE
pfind-parallelize-single-dir-access-using-hashing = FALSE

[find-easy]
# Standard IO500 disables this specific sub-phase in favor of the main [find]
run = FALSE

[find-hard]
# Standard IO500 disables this specific sub-phase
run = FALSE

# =======================================================
# EXTENDED PHASES (DISABLED FOR STANDARD RUN)
# =======================================================
#Enable these only if you need an "Extended" score.

[ior-rnd4K]
blockSize = 1073741824
run = FALSE
randomPrefill = 0
[ior-rnd4K-write]
run = FALSE
[ior-rnd4K-read]
run = FALSE

[ior-rnd1MB]
blockSize = 1073741824
run = FALSE
randomPrefill = 0
[ior-rnd1MB-write]
run = FALSE
[ior-rnd1MB-read]
run = FALSE

[mdworkbench]
waitingTime = 0.0
run = FALSE
[mdworkbench-create]
run = FALSE
[mdworkbench-bench]
run = FALSE
[mdworkbench-delete]
run = FALSE
